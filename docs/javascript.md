# JavaScript

## ëª©ì°¨

- [JavaScript](#javascript)
  - [ëª©ì°¨](#ëª©ì°¨)
  - [ê°œìš”](#ê°œìš”)
  - [window.Store.state - ì „ì—­ ìƒíƒœ ê´€ë¦¬](#windowStorestate---ì „ì—­-ìƒíƒœ-ê´€ë¦¬)
    - [ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´](#ë¡œê·¸ì¸-ì‚¬ìš©ì-ì •ë³´)
      - [window.Store.state ì˜ˆì œ](#windowStorestate-ì˜ˆì œ)
    - [Vue.js Reactivity ì‚¬ìš©](#vuejs-reactivity-ì‚¬ìš©)
      - [ì˜¬ë°”ë¥¸ íŒ¨í„´](#ì˜¬ë°”ë¥¸-íŒ¨í„´)
    - [ì‚¬ìš© ì˜ˆì œ ëª¨ìŒ](#ì‚¬ìš©-ì˜ˆì œ-ëª¨ìŒ)
      - [ì˜ˆì œ 1: Optional Chaining ì‚¬ìš© (ê¶Œì¥)](#ì˜ˆì œ-1-optional-chaining-ì‚¬ìš©-ê¶Œì¥)
      - [ì˜ˆì œ 2: Computed Property ì‚¬ìš©](#ì˜ˆì œ-2-computed-property-ì‚¬ìš©)
      - [ì˜ˆì œ 3: Templateì—ì„œ ì§ì ‘ ì¡°ê±´ë¶€ ë Œë”ë§](#ì˜ˆì œ-3-templateì—ì„œ-ì§ì ‘-ì¡°ê±´ë¶€-ë Œë”ë§)
    - [ì‹¤ì œ ì˜ˆì œ - í”„ë¡œí•„ í˜ì´ì§€](#ì‹¤ì œ-ì˜ˆì œ---í”„ë¡œí•„-í˜ì´ì§€)
    - [ì•ˆí‹°íŒ¨í„´](#ì•ˆí‹°íŒ¨í„´)
    - [Reactivityì˜ ì¥ì ](#reactivityì˜-ì¥ì )
    - [ìš”ì•½](#ìš”ì•½)
  - [ë‹¤êµ­ì–´ ë²ˆì—­](#ë‹¤êµ­ì–´-ë²ˆì—­)
    - [PHP í•¨ìˆ˜ë¡œ ë²ˆì—­ í…ìŠ¤íŠ¸ ì£¼ì… (ê¶Œì¥)](#php-í•¨ìˆ˜ë¡œ-ë²ˆì—­-í…ìŠ¤íŠ¸-ì£¼ì…-ê¶Œì¥)
    - [window.t ê°ì²´ (ë ˆê±°ì‹œ)](#windowt-ê°ì²´-ë ˆê±°ì‹œ)
  - [í˜ì´ì§€ URL ë¼ìš°íŒ…](#í˜ì´ì§€-url-ë¼ìš°íŒ…)
    - [PHP href() í•¨ìˆ˜ë¡œ URL ìƒì„± (ê¶Œì¥)](#php-href-í•¨ìˆ˜ë¡œ-url-ìƒì„±-ê¶Œì¥)
    - [window.hrefs ê°ì²´ (ë ˆê±°ì‹œ)](#windowhrefs-ê°ì²´-ë ˆê±°ì‹œ)
  - [ready() í•¨ìˆ˜](#ready-í•¨ìˆ˜)
    - [ì˜¬ë°”ë¥¸ ì‚¬ìš© ì˜ˆì œ](#ì˜¬ë°”ë¥¸-ì‚¬ìš©-ì˜ˆì œ)
    - [ë¡œë”© ìˆœì„œ](#ë¡œë”©-ìˆœì„œ)
  - [Petite Vue.js - ê²½ëŸ‰ ë°˜ì‘í˜• í”„ë ˆì„ì›Œí¬](#petite-vuejs---ê²½ëŸ‰-ë°˜ì‘í˜•-í”„ë ˆì„ì›Œí¬)
    - [ê°œìš”](#petite-vuejs-ê°œìš”)
    - [ìë™ ì´ˆê¸°í™”](#ìë™-ì´ˆê¸°í™”)
    - [ê¸°ë³¸ ì‚¬ìš©ë²•](#ê¸°ë³¸-ì‚¬ìš©ë²•)
    - [Vue.jsì™€ì˜ ì°¨ì´ì ](#vuejsì™€ì˜-ì°¨ì´ì )
    - [ì‹¤ì œ ì˜ˆì œ](#petite-vue-ì‹¤ì œ-ì˜ˆì œ)
    - [ì£¼ì˜ì‚¬í•­](#petite-vue-ì£¼ì˜ì‚¬í•­)

---

## ê°œìš”

Sonubì˜ JavaScriptëŠ” **PHP MPA (Multi-Page Application)** ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ë©°, ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ JavaScript ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

### JavaScript ì‘ì„± ë°©ì‹

**ğŸ”¥ğŸ”¥ğŸ”¥ ìµœê°•ë ¥ ê·œì¹™: ëª¨ë“  JavaScriptëŠ” í˜ì´ì§€ íŒŒì¼ ë‚´ë¶€ì— `<script>` íƒœê·¸ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤ ğŸ”¥ğŸ”¥ğŸ”¥**

- **âœ… í•„ìˆ˜**: ëª¨ë“  JavaScriptëŠ” `page/**/*.php` ë˜ëŠ” `widgets/**/*.php` ë‚´ë¶€ì— `<script>` íƒœê·¸ë¡œ ì‘ì„±
- **âœ… í•„ìˆ˜**: `ready()` ë˜í¼ í•¨ìˆ˜ ì‚¬ìš©
- **âŒ ê¸ˆì§€**: ì™¸ë¶€ JavaScript íŒŒì¼ë¡œ ë¶„ë¦¬ ê¸ˆì§€

### PHP í•¨ìˆ˜ ì§ì ‘ ì‚¬ìš©

**âœ… PHP í•¨ìˆ˜ ì§ì ‘ ì‚¬ìš©:**
- `<?= tr('í…ìŠ¤íŠ¸') ?>`: ì¸ë¼ì¸ ë²ˆì—­ í•¨ìˆ˜ ì‚¬ìš© ê°€ëŠ¥
- `<?= href()->user->profile ?>`: í˜ì´ì§€ URL ë¼ìš°íŒ… ì§ì ‘ ì‚¬ìš©
- `<?= t()->ê²€ìƒ‰ ?>`: ë‹¤êµ­ì–´ ë²ˆì—­ í…ìŠ¤íŠ¸ ì£¼ì…
- `<?= login()->id ?>`: ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´ ì ‘ê·¼

**âœ… ì¥ì :**
- HTML, CSS, JavaScriptê°€ í•œ íŒŒì¼ì— ëª¨ì—¬ ìˆì–´ ê°€ë…ì„± í–¥ìƒ
- PHP í•¨ìˆ˜ë¥¼ í†µí•´ JavaScriptì— í•„ìš”í•œ í…ìŠ¤íŠ¸, URL, ê¸°íƒ€ ì •ë³´ ì£¼ì…
- íŒŒì¼ ê´€ë¦¬ ê°„ì†Œí™”

### ì „ì—­ ê°ì²´ (ë ˆê±°ì‹œ)

ë‹¤ìŒ ì „ì—­ ê°ì²´ë“¤ì€ **ë ˆê±°ì‹œ**ì´ë©°, ìƒˆë¡œìš´ ì½”ë“œì—ì„œëŠ” **PHP í•¨ìˆ˜ë¥¼ ì§ì ‘ ì‚¬ìš©**í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤:

- **window.Store.state**: Vue.js Reactivity Proxyë¡œ êµ¬í˜„ëœ ì „ì—­ ìƒíƒœ ê´€ë¦¬ (ê³„ì† ì‚¬ìš©)
- ~~**window.t**: ë‹¤êµ­ì–´ ë²ˆì—­ ê°ì²´~~ â†’ `<?= tr('í…ìŠ¤íŠ¸') ?>` ë˜ëŠ” `<?= t()->í‚¤ ?>` ì‚¬ìš© ê¶Œì¥
- ~~**window.hrefs**: í˜ì´ì§€ URL ë¼ìš°íŒ… ê°ì²´~~ â†’ `<?= href()->í˜ì´ì§€->ê²½ë¡œ ?>` ì‚¬ìš© ê¶Œì¥

### ì‹¤ì œ ì˜ˆì œ - page/user/list.php

**page/user/list.php** íŒŒì¼ì€ JavaScriptë¥¼ í˜ì´ì§€ íŒŒì¼ ë‚´ë¶€ì— `<script>` íƒœê·¸ë¡œ í¬í•¨í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤:

```php
<!-- page/user/list.php -->
<div id="user-list-app">
    <!-- ì‚¬ìš©ì ëª©ë¡ HTML -->
    <div v-for="user in users" :key="user.id">
        <!-- âœ… PHP í•¨ìˆ˜ë¡œ URL ì§ì ‘ ì£¼ì… -->
        <a :href="`<?= href()->user->profile ?>?id=${user.id}`">
            {{ user.first_name }} {{ user.last_name }}
        </a>
    </div>
</div>

<script>
ready(() => {
    Vue.createApp({
        data() {
            return {
                users: <?= json_encode($users) ?>,
                myUserId: <?= login() ? login()->id : 'null' ?>
            };
        },
        methods: {
            async loadUsers() {
                // âœ… PHP í•¨ìˆ˜ë¡œ alert ë©”ì‹œì§€ ì§ì ‘ ì£¼ì…
                if (!this.myUserId) {
                    alert('<?= tr('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤') ?>');
                    // âœ… PHP í•¨ìˆ˜ë¡œ URL ì§ì ‘ ì£¼ì…
                    window.location.href = '<?= href()->user->login ?>';
                    return;
                }

                // API í˜¸ì¶œ
                const result = await func('list_users', {
                    page: 1,
                    per_page: 20
                });
            }
        }
    }).mount('#user-list-app');
});
</script>
```

**ì¥ì :**
- âœ… `<?= href()->user->profile ?>`: URLì„ PHPì—ì„œ ì§ì ‘ ìƒì„±í•˜ì—¬ ì£¼ì…
- âœ… `<?= tr('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤') ?>`: ë²ˆì—­ í…ìŠ¤íŠ¸ë¥¼ PHPì—ì„œ ì§ì ‘ ì£¼ì…
- âœ… `<?= login()->id ?>`: ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´ë¥¼ PHPì—ì„œ ì§ì ‘ ì ‘ê·¼
- âœ… `<?= json_encode($users) ?>`: ì„œë²„ ë°ì´í„°ë¥¼ JavaScriptë¡œ Hydration

### ê¸´ JavaScript ì½”ë“œ ê´€ë¦¬

JavaScript ì½”ë“œê°€ ê¸¸ì–´ì§€ë”ë¼ë„ **ë°˜ë“œì‹œ í˜ì´ì§€ íŒŒì¼ ë‚´ë¶€ì— `<script>` íƒœê·¸ë¡œ ì‘ì„±**í•´ì•¼ í•©ë‹ˆë‹¤:

**page/user/list.php:**
```php
<div id="user-list-app">
    <!-- ì‚¬ìš©ì ëª©ë¡ HTML -->
</div>

<!-- âœ… ê¸´ JavaScriptë„ í˜ì´ì§€ ë‚´ë¶€ì— ì‘ì„± -->
<script>
ready(() => {
    Vue.createApp({
        data() {
            return {
                users: <?= json_encode($users) ?>,
                myUserId: <?= login() ? login()->id : 'null' ?>
            };
        },
        methods: {
            async requestFriend(user) {
                // âœ… PHP í•¨ìˆ˜ë¡œ ë²ˆì—­ í…ìŠ¤íŠ¸ ì£¼ì…
                alert('<?= tr('ì¹œêµ¬ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤') ?>');

                // API í˜¸ì¶œ
                await func('request_friend', {
                    me: this.myUserId,
                    other: user.id,
                    auth: true
                });
            }
        }
    }).mount('#user-list-app');
});
</script>
```

**í•µì‹¬ í¬ì¸íŠ¸:**
- âœ… ëª¨ë“  JavaScriptëŠ” `<script>` íƒœê·¸ ë‚´ì— ì‘ì„±
- âœ… `<?= tr(...) ?>`, `<?= href()->... ?>`, `<?= login()->id ?>` ì§ì ‘ ì‚¬ìš© ê°€ëŠ¥
- âœ… HTML, CSS, JavaScriptê°€ í•œ íŒŒì¼ì— ëª¨ì—¬ ìˆì–´ ê°€ë…ì„± í–¥ìƒ
- âœ… í˜ì´ì§€ë³„ ë²ˆì—­ì€ íŒŒì¼ í•˜ë‹¨ì— `inject_[íŒŒì¼ëª…]_language()` í•¨ìˆ˜ ì •ì˜

---

## window.Store.state - ì „ì—­ ìƒíƒœ ê´€ë¦¬

**ğŸ”¥ğŸ”¥ğŸ”¥ ìµœê°•ë ¥ ê·œì¹™: ì‚¬ìš©ì ì •ë³´ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” window.Store.state.userì—ì„œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤ ğŸ”¥ğŸ”¥ğŸ”¥**

### ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´

ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ë©´, **window.Store.state.user**ì— **Vue.jsì˜ Reactivity Proxy**ë¡œ ì‚¬ìš©ì ì •ë³´ê°€ ì €ì¥ë©ë‹ˆë‹¤.

#### window.Store.state ì˜ˆì œ

```javascript
window.Store = {
    state: {
        user: {
            id: 1,                    // ì‚¬ìš©ì ID
            firebase_uid: 'abc123',   // Firebase UID
            first_name: 'ê¸¸ë™',       // ì´ë¦„
            last_name: 'í™',          // ì„±
            middle_name: '',          // ì¤‘ê°„ ì´ë¦„
            gender: 'M',              // ì„±ë³„
            birthday: 631152000,      // ìƒë…„ì›”ì¼ (Unix timestamp)
            photo_url: '/uploads/...' // í”„ë¡œí•„ ì‚¬ì§„ URL
            // ... ê¸°íƒ€ ì‚¬ìš©ì ì •ë³´
        }
        // ... ê¸°íƒ€ ì „ì—­ ìƒíƒœ
    }
};
```

### Vue.js Reactivity ì‚¬ìš©

**ì¤‘ìš” ì£¼ì˜**: `window.Store.state`ëŠ” **Vue.js Reactivity Proxy**ì´ë¯€ë¡œ, Vue ì»´í¬ë„ŒíŠ¸ì˜ `data()`ì—ì„œ ì°¸ì¡°í•´ì•¼ ë°˜ì‘í˜•ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.

#### ì˜¬ë°”ë¥¸ íŒ¨í„´

**âœ… Vue ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœ ì‚¬ìš©:**

```javascript
ready(() => {
    Vue.createApp({
        data() {
            return {
                // âœ… window.Store.stateë¥¼ dataì— ì¶”ê°€ - ë°˜ì‘í˜•ìœ¼ë¡œ ë™ì‘!
                state: window.Store.state
            };
        },
        methods: {
            async requestFriend(otherUserId) {
                // âœ… this.state.userë¡œ ì ‘ê·¼ - ë°˜ì‘í˜•!
                if (!this.state?.user?.id) {
                    alert('<?= tr('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤') ?>');
                    window.location.href = '<?= href()->user->login ?>';
                    return;
                }

                const myUserId = this.state.user.id;

                // ìê¸° ìì‹ ì—ê²Œ ì¹œêµ¬ ìš”ì²­ ë°©ì§€
                if (otherUserId === myUserId) {
                    alert('<?= tr('ìê¸° ìì‹ ì—ê²ŒëŠ” ì¹œêµ¬ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤') ?>');
                    return;
                }

                try {
                    await func('request_friend', {
                        me: myUserId,
                        other: otherUserId,
                        auth: true
                    });

                    alert('<?= tr('ì¹œêµ¬ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤') ?>');

                } catch (error) {
                    console.error('ì¹œêµ¬ ìš”ì²­ ì‹¤íŒ¨:', error);
                    alert(`<?= tr('ì¹œêµ¬ ìš”ì²­ ì‹¤íŒ¨') ?>: ${error.message}`);
                }
            }
        },
        mounted() {
            console.log('[profile] ì‚¬ìš©ì ì •ë³´:', this.state.user);
        }
    }).mount('#profile-app');
});
```

### ì‚¬ìš© ì˜ˆì œ ëª¨ìŒ

#### ì˜ˆì œ 1: Optional Chaining ì‚¬ìš© (ê¶Œì¥)

```javascript
ready(() => {
    Vue.createApp({
        data() {
            return {
                state: window.Store.state
            };
        },
        methods: {
            doSomething() {
                // âœ… Optional Chainingìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì‚¬ìš©
                if (!this.state?.user?.id) {
                    alert('<?= tr('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤') ?>');
                    window.location.href = '<?= href()->user->login ?>';
                    return;
                }

                // ì‚¬ìš©ì ì‚¬ìš© ê°€ëŠ¥ - ì‚¬ìš©ì ì •ë³´ ì ‘ê·¼
                const myUserId = this.state.user.id;
                const myName = `${this.state.user.first_name} ${this.state.user.last_name}`;
                console.log(`ì‚¬ìš©ì ì •ë³´: ${myName} (ID: ${myUserId})`);
            }
        }
    }).mount('#app');
});
```

#### ì˜ˆì œ 2: Computed Property ì‚¬ìš©

```javascript
ready(() => {
    Vue.createApp({
        data() {
            return {
                state: window.Store.state
            };
        },
        computed: {
            // âœ… ì‚¬ìš©ì ì—¬ë¶€ë¥¼ computedë¡œ ì •ì˜
            isLoggedIn() {
                return !!(this.state?.user?.id);
            },
            currentUser() {
                return this.state?.user || null;
            }
        },
        methods: {
            doSomething() {
                if (!this.isLoggedIn) {
                    alert('<?= tr('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤') ?>');
                    window.location.href = '<?= href()->user->login ?>';
                    return;
                }

                const user = this.currentUser;
                console.log(`ì‚¬ìš©ì ì •ë³´: ${user.first_name} ${user.last_name}`);
            }
        }
    }).mount('#app');
});
```

#### ì˜ˆì œ 3: Templateì—ì„œ ì§ì ‘ ì¡°ê±´ë¶€ ë Œë”ë§

```javascript
ready(() => {
    Vue.createApp({
        data() {
            return {
                state: window.Store.state
            };
        },
        computed: {
            isLoggedIn() {
                return !!(this.state?.user?.id);
            }
        }
    }).mount('#app');
});
```

```html
<div id="app">
    <!-- âœ… ì‚¬ìš©ì ìƒíƒœ ê¸°ë°˜ ì¡°ê±´ë¶€ UI í‘œì‹œ -->
    <div v-if="isLoggedIn">
        <p>í™˜ì˜í•©ë‹ˆë‹¤, {{ state.user.first_name }} {{ state.user.last_name }}ë‹˜!</p>
        <button @click="doSomething">ì¹œêµ¬ ì¶”ê°€</button>
    </div>
    <div v-else>
        <p>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
        <a href="<?= href()->user->login ?>">ë¡œê·¸ì¸</a>
    </div>
</div>
```

### ì‹¤ì œ ì˜ˆì œ - í”„ë¡œí•„ í˜ì´ì§€

**page/user/profile.php:**

```php
<?php
$user_id = http_param('id') ?? login()->id ?? 0;
$user_data = get_user(['id' => $user_id]);
$user = new UserModel($user_data);
$is_me = login() && login()->id === $user->id;
?>

<div id="profile-app">
    <h1><?= htmlspecialchars($user->displayFullName()) ?></h1>

    <?php if (!$is_me): ?>
        <button @click="requestFriend(<?= $user->id ?>)"
                class="btn-add-friend"
                :disabled="requesting || isFriend">
            <span v-if="requesting">ìš”ì²­ ì¤‘...</span>
            <span v-else-if="isFriend">ì¹œêµ¬ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤</span>
            <span v-else>ì¹œêµ¬ ì¶”ê°€</span>
        </button>
    <?php endif; ?>
</div>
```

**page/user/profile.js:**

```javascript
ready(() => {
    Vue.createApp({
        data() {
            return {
                // âœ… ì „ì—­ ìƒíƒœ ì¶”ê°€ - ë°˜ì‘í˜•!
                state: window.Store.state,
                requesting: false,
                isFriend: false
            };
        },
        computed: {
            isLoggedIn() {
                return !!(this.state?.user?.id);
            },
            currentUserId() {
                return this.state?.user?.id || null;
            }
        },
        methods: {
            async requestFriend(otherUserId) {
                // âœ… ë¡œê·¸ì¸ ì‚¬ìš©
                if (!this.state?.user?.id) {
                    alert('<?= tr('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤') ?>');
                    const currentUrl = encodeURIComponent(window.location.href);
                    window.location.href = `<?= href()->user->login ?>?return=${currentUrl}`;
                    return;
                }

                const myUserId = this.state.user.id;

                // ìê¸° ìì‹ ì—ê²Œ ì¹œêµ¬ ìš”ì²­ ë°©ì§€
                if (otherUserId === myUserId) {
                    alert('<?= tr('ìê¸° ìì‹ ì—ê²ŒëŠ” ì¹œêµ¬ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤') ?>');
                    return;
                }

                if (this.isFriend) {
                    alert('<?= t()->ì´ë¯¸_ì¹œêµ¬ì…ë‹ˆë‹¤ ?>');
                    return;
                }

                try {
                    this.requesting = true;

                    await func('request_friend', {
                        me: myUserId,
                        other: otherUserId,
                        auth: true
                    });

                    this.isFriend = true;
                    alert('<?= t()->ì¹œêµ¬_ìš”ì²­_ì „ì†¡_ì™„ë£Œ ?>');

                } catch (error) {
                    console.error('ì¹œêµ¬ ìš”ì²­ ì‹¤íŒ¨:', error);
                    this.requesting = false;
                    alert(`<?= tr('ì¹œêµ¬ ìš”ì²­ ì‹¤íŒ¨') ?>: ${error.message}`);
                }
            }
        },
        mounted() {
            console.log('[profile] Vue.js í”„ë¡œí•„ í˜ì´ì§€ ì´ˆê¸°í™”ë¨');
            console.log('[profile] ì‚¬ìš©ì ì •ë³´:', this.state.user);
        }
    }).mount('#profile-app');
});
```

### ì•ˆí‹°íŒ¨í„´

**âŒ window.Store.user ì§ì ‘ ì ‘ê·¼ (ë°˜ì‘í˜• X):**

```javascript
// âŒ ì˜ëª»ëœ ì˜ˆì œ - window.Store.userëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!
if (!window.Store.user?.id) {  // âŒ undefined!
    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
}
```

**âŒ stateë¥¼ dataì— ì¶”ê°€í•˜ì§€ ì•ŠìŒ (ë°˜ì‘í˜• X):**

```javascript
// âŒ ì˜ëª»ëœ ì˜ˆì œ - ë°˜ì‘í˜•ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤!
ready(() => {
    Vue.createApp({
        data() {
            return {
                // stateë¥¼ ì¶”ê°€í•˜ì§€ ì•ŠìŒ
            };
        },
        methods: {
            doSomething() {
                // âŒ window.Store.state.userë¥¼ ì§ì ‘ ì°¸ì¡° - ë°˜ì‘í˜• X
                if (!window.Store.state?.user?.id) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    return;
                }

                // ë™ì‘ì€ í•˜ì§€ë§Œ UI ì—…ë°ì´íŠ¸ê°€ ì•ˆë¨ (ì‚¬ìš©ì ì •ë³´ ë³€ê²½ ì‹œ UI ë¯¸ë°˜ì˜)
                const myUserId = window.Store.state.user.id;
            }
        }
    }).mount('#app');
});
```

**âœ… ì˜¬ë°”ë¥¸ íŒ¨í„´ - stateë¥¼ dataì— ì¶”ê°€:**

```javascript
ready(() => {
    Vue.createApp({
        data() {
            return {
                // âœ… stateë¥¼ dataì— ì¶”ê°€ - ë°˜ì‘í˜•!
                state: window.Store.state
            };
        },
        methods: {
            doSomething() {
                // âœ… this.state.userë¡œ ì ‘ê·¼ - ë°˜ì‘í˜•!
                if (!this.state?.user?.id) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    return;
                }

                // ì‚¬ìš©ì ì •ë³´ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ UI ì—…ë°ì´íŠ¸ë¨
                const myUserId = this.state.user.id;
            }
        }
    }).mount('#app');
});
```

### Reactivityì˜ ì¥ì 

**Vue.js Reactivity Proxyë¥¼ ì‚¬ìš©í•˜ë©´:**

1. **ìë™ UI ì—…ë°ì´íŠ¸**: ì‚¬ìš©ì ì •ë³´ê°€ ë³€ê²½ë˜ë©´ ìë™ìœ¼ë¡œ UIê°€ ì—…ë°ì´íŠ¸ë¨
2. **ì½”ë“œ ê°„ê²°ì„±**: ìˆ˜ë™ìœ¼ë¡œ UIë¥¼ ì—…ë°ì´íŠ¸í•  í•„ìš” ì—†ìŒ
3. **ì¼ê´€ì„±**: ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼í•œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê³µìœ 

**ì˜ˆì œ: ì‚¬ìš©ì ì •ë³´ ë³€ê²½ ì‹œ ìë™ ì—…ë°ì´íŠ¸**

```javascript
ready(() => {
    Vue.createApp({
        data() {
            return {
                state: window.Store.state
            };
        },
        methods: {
            async updateProfile() {
                try {
                    await func('update_user', {
                        first_name: 'ìƒˆë¡œìš´',
                        last_name: 'ì´ë¦„',
                        auth: true
                    });

                    // âœ… state.userê°€ ë³€ê²½ë˜ë©´ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¨!
                    // í…œí”Œë¦¿ì˜ {{ state.user.first_name }} {{ state.user.last_name }}ë„ ìë™ ì—…ë°ì´íŠ¸!

                } catch (error) {
                    console.error('í”„ë¡œí•„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
                }
            }
        }
    }).mount('#app');
});
```

```html
<div id="app">
    <!-- âœ… state.userê°€ ë³€ê²½ë˜ë©´ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¨! -->
    <p>í™˜ì˜í•©ë‹ˆë‹¤, {{ state.user.first_name }} {{ state.user.last_name }}ë‹˜!</p>
    <button @click="updateProfile">í”„ë¡œí•„ ì—…ë°ì´íŠ¸</button>
</div>
```

### ìš”ì•½

- **âœ… í•„ìˆ˜**: `data()`ì—ì„œ `state: window.Store.state` ì¶”ê°€
- **âœ… í•„ìˆ˜**: `this.state.user`ë¡œ ì‚¬ìš©ì ì •ë³´ ì ‘ê·¼
- **âœ… ê¶Œì¥**: Optional Chaining (`?.`) ì‚¬ìš©ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì‚¬ìš©
- **âœ… ê¶Œì¥**: Computed Propertyë¡œ `isLoggedIn` ì •ì˜
- **âŒ ê¸ˆì§€**: `window.Store.user` ì§ì ‘ ì ‘ê·¼ (ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤)
- **âŒ ê¸ˆì§€**: `window.Store.state.user`ë¥¼ dataì— ì¶”ê°€í•˜ì§€ ì•Šê³  ì§ì ‘ ì ‘ê·¼ (ë°˜ì‘í˜• X)
- **ì¥ì **: Vue.js Reactivityë¡œ ìë™ UI ì—…ë°ì´íŠ¸, ì½”ë“œ ê°„ê²°ì„±, ì¼ê´€ì„± ë³´ì¥

---

## ë‹¤êµ­ì–´ ë²ˆì—­

### ë²ˆì—­ ë°©ì‹ ê°œìš”

Sonubì—ì„œëŠ” **ëª¨ë“  JavaScript ì½”ë“œë¥¼ PHP í˜ì´ì§€ íŒŒì¼ ë‚´ë¶€ì˜ `<script>` íƒœê·¸ë¡œ ì‘ì„±**í•˜ë¯€ë¡œ, ë‹¤ìŒ ë‘ ê°€ì§€ ë²ˆì—­ ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **PHP `tr()` í•¨ìˆ˜**: ì„œë²„ ì‹¤í–‰ ì‹œì ì— ë²ˆì—­ í…ìŠ¤íŠ¸ ì£¼ì… (ì •ì  ë²ˆì—­)
2. **JavaScript `tr()` í•¨ìˆ˜**: í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰ ì‹œì ì— ë™ì  ë²ˆì—­ (ë™ì  ì–¸ì–´ ì „í™˜)

**ğŸ”¥ğŸ”¥ğŸ”¥ ì¤‘ìš”: JavaScriptëŠ” ì™¸ë¶€ `.js` íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ì§€ ì•Šê³  í˜ì´ì§€ ë‚´ `<script>` íƒœê·¸ë¡œ ì‘ì„±í•©ë‹ˆë‹¤ ğŸ”¥ğŸ”¥ğŸ”¥**

### JavaScript tr() í•¨ìˆ˜ (í˜ì´ì§€ ë‚´ `<script>` íƒœê·¸ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥)

**âš ï¸ ì¤‘ìš” ì œí•œ ì‚¬í•­:**
- **âœ… ì‚¬ìš© ê°€ëŠ¥**: PHP í˜ì´ì§€ íŒŒì¼ ë‚´ë¶€ì˜ `<script>` íƒœê·¸ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥
- **âŒ ì‚¬ìš© ë¶ˆê°€**: ì™¸ë¶€ `.js` íŒŒì¼ì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€ (SonubëŠ” ì™¸ë¶€ JS íŒŒì¼ ë¶„ë¦¬ë¥¼ ê¶Œì¥í•˜ì§€ ì•ŠìŒ)

JavaScriptì˜ `tr()` í•¨ìˆ˜ëŠ” PHPì˜ `tr()` í•¨ìˆ˜ì™€ ìœ ì‚¬í•œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ë©°, í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ë™ì ìœ¼ë¡œ ì–¸ì–´ë¥¼ ì „í™˜í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

**í•¨ìˆ˜ ìœ„ì¹˜**: `/js/app.js`

```javascript
// ë‹¤êµ­ì–´ ë²ˆì—­ í•¨ìˆ˜
// ì˜ˆì œ: tr({ en: 'Hello', ko: 'ì•ˆë…•í•˜ì„¸ìš”' });
function tr(texts = {}) {
    const lang = window.Store.state.lang;
    return texts[lang] || texts['en'] || '';
}
```

**âœ… ì‚¬ìš© ë°©ë²• (í˜ì´ì§€ ë‚´ `<script>` íƒœê·¸):**

```php
<!-- page/user/profile.php -->
<div id="app">
    <!-- HTML ë‚´ìš© -->
</div>

<script>
ready(() => {
    Vue.createApp({
        data() {
            return {
                state: window.Store.state
            };
        },
        methods: {
            showWelcomeMessage() {
                // âœ… JavaScript tr() í•¨ìˆ˜ ì‚¬ìš© (í˜ì´ì§€ ë‚´ <script>ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥)
                const message = tr({
                    ko: 'í™˜ì˜í•©ë‹ˆë‹¤',
                    en: 'Welcome',
                    ja: 'ã‚ˆã†ã“ã',
                    zh: 'æ¬¢è¿'
                });
                alert(message);
            },
            showLoginRequiredAlert() {
                // âœ… ë™ì  ë²ˆì—­ - ì‚¬ìš©ì ì–¸ì–´ì— ë§ê²Œ ìë™ í‘œì‹œ
                const message = tr({
                    ko: 'ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤',
                    en: 'Login required',
                    ja: 'ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™',
                    zh: 'éœ€è¦ç™»å½•'
                });
                alert(message);
            }
        }
    }).mount('#app');
});
</script>
```

**ì¥ì :**
- âœ… ì‚¬ìš©ì ì–¸ì–´(`window.Store.state.lang`)ì— ë§ê²Œ ìë™ ë²ˆì—­
- âœ… ë™ì  ì–¸ì–´ ì „í™˜ ì§€ì› (ì–¸ì–´ ë³€ê²½ ì‹œ ìë™ ì—…ë°ì´íŠ¸)
- âœ… PHPì˜ `tr()` í•¨ìˆ˜ì™€ ìœ ì‚¬í•œ ì¸í„°í˜ì´ìŠ¤
- âœ… í˜ì´ì§€ íŒŒì¼ ë‚´ë¶€ì— ëª¨ë“  ì½”ë“œê°€ ëª¨ì—¬ ìˆì–´ ê´€ë¦¬ í¸ë¦¬

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:**
- JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ë©”ì‹œì§€
- ì‚¬ìš©ì ì•¡ì…˜ì— ë”°ë¼ ë³€ê²½ë˜ëŠ” í…ìŠ¤íŠ¸
- Vue.js computed propertyì—ì„œ ì‚¬ìš©
- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ì–¸ì–´ë¥¼ ë™ì ìœ¼ë¡œ ì „í™˜í•´ì•¼ í•˜ëŠ” ê²½ìš°

**ì‹¤ì œ ì˜ˆì œ - ë™ì  ì—ëŸ¬ ë©”ì‹œì§€:**

```php
<!-- page/user/submit.php -->
<div id="app">
    <div v-if="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
    <p>{{ welcomeText }}</p>
    <button @click="submitForm">ì œì¶œ</button>
</div>

<script>
ready(() => {
    Vue.createApp({
        data() {
            return {
                state: window.Store.state,
                errorMessage: ''
            };
        },
        computed: {
            // âœ… computedì—ì„œ tr() ì‚¬ìš© - ì–¸ì–´ ë³€ê²½ ì‹œ ìë™ ì—…ë°ì´íŠ¸
            welcomeText() {
                return tr({
                    ko: 'í™˜ì˜í•©ë‹ˆë‹¤',
                    en: 'Welcome',
                    ja: 'ã‚ˆã†ã“ã',
                    zh: 'æ¬¢è¿'
                });
            }
        },
        methods: {
            async submitForm() {
                try {
                    await func('submit_data', { auth: true });

                    // âœ… ì„±ê³µ ë©”ì‹œì§€ - ì‚¬ìš©ì ì–¸ì–´ë¡œ í‘œì‹œ
                    alert(tr({
                        ko: 'ì œì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤',
                        en: 'Submission completed',
                        ja: 'é€ä¿¡ãŒå®Œäº†ã—ã¾ã—ãŸ',
                        zh: 'æäº¤å®Œæˆ'
                    }));
                } catch (error) {
                    // âœ… ì—ëŸ¬ ë©”ì‹œì§€ - ì‚¬ìš©ì ì–¸ì–´ë¡œ í‘œì‹œ
                    this.errorMessage = tr({
                        ko: 'ì œì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤',
                        en: 'An error occurred during submission',
                        ja: 'é€ä¿¡ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ',
                        zh: 'æäº¤æ—¶å‘ç”Ÿé”™è¯¯'
                    });
                }
            }
        }
    }).mount('#app');
});
</script>
```

### PHP í•¨ìˆ˜ë¡œ ë²ˆì—­ í…ìŠ¤íŠ¸ ì£¼ì… (ì •ì  ë²ˆì—­ - ê¶Œì¥)

**ğŸ”¥ğŸ”¥ğŸ”¥ ìµœê°•ë ¥ ê¶Œì¥: ëŒ€ë¶€ë¶„ì˜ ê²½ìš° PHP `tr()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì„¸ìš” ğŸ”¥ğŸ”¥ğŸ”¥**

PHPì˜ `tr()` í•¨ìˆ˜ëŠ” ì„œë²„ ì‹¤í–‰ ì‹œì ì— ë²ˆì—­ í…ìŠ¤íŠ¸ë¥¼ ì£¼ì…í•˜ë¯€ë¡œ, **ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤**.

**âœ… ì‚¬ìš© ë°©ë²• 1: PHP tr() í•¨ìˆ˜ (ê°€ì¥ ê¶Œì¥)**

```php
<!-- page/user/profile.php -->
<div id="app">
    <!-- HTML ë‚´ìš© -->
</div>

<script>
ready(() => {
    Vue.createApp({
        methods: {
            showAlert() {
                // âœ… PHP tr() í•¨ìˆ˜ë¡œ ì§ì ‘ ì£¼ì… (ì„œë²„ ì‹¤í–‰ ì‹œì )
                alert('<?= tr('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤') ?>');
            },
            goToLogin() {
                // âœ… PHP tr() í•¨ìˆ˜ë¡œ confirm ë©”ì‹œì§€ ì£¼ì…
                if (confirm('<?= tr('ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?') ?>')) {
                    window.location.href = '<?= href()->user->login ?>';
                }
            }
        }
    }).mount('#app');
});
</script>
```

**âœ… ì‚¬ìš© ë°©ë²• 2: t()->í‚¤ ì‚¬ìš©**

```php
<!-- page/user/profile.php -->
<div id="app">
    <!-- HTML ë‚´ìš© -->
</div>

<script>
ready(() => {
    Vue.createApp({
        methods: {
            showAlert() {
                // âœ… PHP t()->í‚¤ë¡œ ì§ì ‘ ì£¼ì… (ì„œë²„ ì‹¤í–‰ ì‹œì )
                alert('<?= t()->ë¡œê·¸ì¸ì´_í•„ìš”í•©ë‹ˆë‹¤ ?>');
            }
        }
    }).mount('#app');
});
</script>
```

**ì¥ì :**
- âœ… PHP ì‹¤í–‰ ì‹œì ì— ë²ˆì—­ í…ìŠ¤íŠ¸ ì£¼ì… (ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§)
- âœ… ì„œë²„ ì‚¬ì´ë“œ ë²ˆì—­ìœ¼ë¡œ SEO ê°œì„ 
- âœ… ì •ì  í…ìŠ¤íŠ¸ì— ê°€ì¥ ì í•©
- âœ… í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ë¯¸ ë²ˆì—­ëœ í…ìŠ¤íŠ¸ ì œê³µ (ì„±ëŠ¥ í–¥ìƒ)
- âœ… ì™¸ë¶€ `.js` íŒŒì¼ë¡œ ë¶„ë¦¬í•  í•„ìš” ì—†ìŒ (Sonub í‘œì¤€ íŒ¨í„´)

### JavaScript tr() vs PHP tr() ë¹„êµ

| í•­ëª© | JavaScript `tr()` | PHP `tr()` / `t()->í‚¤` |
|------|------------------|----------------------|
| **ì‹¤í–‰ ì‹œì ** | í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì €) | ì„œë²„ (PHP ì‹¤í–‰ ì‹œì ) |
| **ì‚¬ìš© ìœ„ì¹˜** | í˜ì´ì§€ ë‚´ `<script>` íƒœê·¸ë§Œ | í˜ì´ì§€ ë‚´ `<script>` íƒœê·¸ ë° HTML |
| **ì™¸ë¶€ `.js` íŒŒì¼** | âŒ ì‚¬ìš© ë¶ˆê°€ | âŒ ì‚¬ìš© ë¶ˆê°€ (ì™¸ë¶€ JS íŒŒì¼ ë¶„ë¦¬ ê¸ˆì§€) |
| **ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤** | ë™ì  ë²ˆì—­ í•„ìš”í•œ ê²½ìš° | ì •ì  í…ìŠ¤íŠ¸ ë²ˆì—­ (ëŒ€ë¶€ë¶„ì˜ ê²½ìš°) |
| **ì–¸ì–´ ì „í™˜** | âœ… ì‹¤ì‹œê°„ ì–¸ì–´ ì „í™˜ ê°€ëŠ¥ | âŒ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ í•„ìš” |
| **Vue computed** | âœ… ì‚¬ìš© ê°€ëŠ¥ (ë°˜ì‘í˜•) | âœ… ì‚¬ìš© ê°€ëŠ¥ (PHP ì‹¤í–‰ í›„ ê³ ì •) |
| **SEO** | âŒ í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ | âœ… ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ |
| **ì„±ëŠ¥** | í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬ (ì•½ê°„ ëŠë¦¼) | âœ… ì„œë²„ ì²˜ë¦¬ (ë¹ ë¦„) |
| **ê¶Œì¥ ì‚¬ìš©ì²˜** | JavaScript ë™ì  ë©”ì‹œì§€, computed | **HTML í…œí”Œë¦¿ ì •ì  í…ìŠ¤íŠ¸ (ìš°ì„  ê¶Œì¥)** |

**ğŸ”¥ğŸ”¥ğŸ”¥ ì‚¬ìš© ê°€ì´ë“œë¼ì¸:**

1. **âœ… PHP `tr()` í•¨ìˆ˜ ìš°ì„  ì‚¬ìš©** (ëŒ€ë¶€ë¶„ì˜ ê²½ìš°)
   - HTML í…œí”Œë¦¿ì˜ ì •ì  í…ìŠ¤íŠ¸
   - JavaScript `<script>` íƒœê·¸ ë‚´ë¶€ì˜ alert, confirm ë©”ì‹œì§€
   - ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ì´ í•„ìš”í•œ ëª¨ë“  í…ìŠ¤íŠ¸

2. **âœ… JavaScript `tr()` í•¨ìˆ˜ëŠ” íŠ¹ë³„í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©**
   - JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ë©”ì‹œì§€
   - Vue.js computed propertyì—ì„œ ì–¸ì–´ ì „í™˜ì´ í•„ìš”í•œ ê²½ìš°
   - í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ì‹¤ì‹œê°„ ì–¸ì–´ ì „í™˜ì´ í•„ìš”í•œ ê²½ìš°

3. **âŒ ì™¸ë¶€ `.js` íŒŒì¼ì—ì„œëŠ” ë‘˜ ë‹¤ ì‚¬ìš© ë¶ˆê°€**
   - SonubëŠ” JavaScriptë¥¼ ì™¸ë¶€ íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ì§€ ì•ŠìŒ
   - ëª¨ë“  JavaScriptëŠ” í˜ì´ì§€ ë‚´ `<script>` íƒœê·¸ë¡œ ì‘ì„±

### window.t ê°ì²´ (ë ˆê±°ì‹œ)

**âŒ ë ˆê±°ì‹œ ë°©ë²• - ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”:**

```javascript
// âŒ ë ˆê±°ì‹œ - ìƒˆ ì½”ë“œì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”
alert(window.t.ë¡œê·¸ì¸ì´_í•„ìš”í•©ë‹ˆë‹¤);
```

**ë¬¸ì œì :**
- âŒ JavaScript ë²ˆë“¤ í¬ê¸° ì¦ê°€ (ëª¨ë“  ë²ˆì—­ í…ìŠ¤íŠ¸ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡)
- âŒ ready() í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥
- âŒ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ ë¶ˆê°€

ìì„¸í•œ ë‚´ìš©ì€ [docs/coding-guideline.md - ë‹¤êµ­ì–´ ë²ˆì—­](./coding-guideline.md#ë‹¤êµ­ì–´-ë²ˆì—­)ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

## í˜ì´ì§€ URL ë¼ìš°íŒ…

**ğŸ”¥ğŸ”¥ğŸ”¥ ì¤‘ìš”: window.hrefsëŠ” ë ˆê±°ì‹œì…ë‹ˆë‹¤. PHP href() í•¨ìˆ˜ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì„¸ìš” ğŸ”¥ğŸ”¥ğŸ”¥**

### PHP href() í•¨ìˆ˜ë¡œ URL ìƒì„± (ê¶Œì¥)

**âœ… ê¶Œì¥ ë°©ë²•:**

```php
<script>
ready(() => {
    Vue.createApp({
        methods: {
            goToLogin() {
                // âœ… PHP href() í•¨ìˆ˜ë¡œ ì§ì ‘ ì£¼ì…
                window.location.href = '<?= href()->user->login ?>';
            },
            goToProfile(userId) {
                // âœ… PHP href() í•¨ìˆ˜ë¡œ URL ìƒì„±
                window.location.href = `<?= href()->user->profile ?>?id=${userId}`;
            }
        }
    }).mount('#app');
});
</script>
```

**ì¥ì :**
- âœ… PHP ì‹¤í–‰ ì‹œì ì— URL ìƒì„±
- âœ… window.hrefs ê°ì²´ ë¶ˆí•„ìš” (JavaScript ë²ˆë“¤ í¬ê¸° ê°ì†Œ)
- âœ… ì„œë²„ ì‚¬ì´ë“œ URL ìƒì„±ìœ¼ë¡œ ì•ˆì •ì„± í–¥ìƒ

### window.hrefs ê°ì²´ (ë ˆê±°ì‹œ)

**âŒ ë ˆê±°ì‹œ ë°©ë²• - ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”:**

```javascript
// âŒ ë ˆê±°ì‹œ - ìƒˆ ì½”ë“œì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”
window.location.href = window.hrefs.login;
```

**ë¬¸ì œì :**
- âŒ JavaScript ë²ˆë“¤ í¬ê¸° ì¦ê°€
- âŒ ready() í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥
- âŒ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ ë¶ˆê°€

ìì„¸í•œ ë‚´ìš©ì€ [docs/coding-guideline.md - URL ë¼ìš°íŒ…](./coding-guideline.md#url-ë°-í˜ì´ì§€-ë§í¬-ê´€ë¦¬-ê·œì¹™)ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

## ready() í•¨ìˆ˜

**ì¤‘ìš” ì‚¬í•­**: `window.Store.state`ëŠ” **ë°˜ë“œì‹œ `ready()` í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ** ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

### ì˜¬ë°”ë¥¸ ì‚¬ìš© ì˜ˆì œ

**âœ… ê¶Œì¥ íŒ¨í„´ - PHP í•¨ìˆ˜ ì§ì ‘ ì‚¬ìš©:**

```php
<script>
ready(() => {
    Vue.createApp({
        data() {
            return {
                state: window.Store.state
            };
        },
        methods: {
            doSomething() {
                // âœ… PHP í•¨ìˆ˜ë¡œ ë²ˆì—­ í…ìŠ¤íŠ¸ ì£¼ì…
                alert('<?= tr('ì‘ì—… ì™„ë£Œ') ?>');

                // âœ… PHP í•¨ìˆ˜ë¡œ URL ì£¼ì…
                window.location.href = '<?= href()->home ?>';
            }
        }
    }).mount('#app');
});
</script>
```

### ë¡œë”© ìˆœì„œ

```
1. Vue.js, Firebase ë“± ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
2. í˜ì´ì§€ë³„ JavaScript íŒŒì¼ ë¡œë“œ (defer)
3. í˜ì´ì§€ ì½˜í…ì¸  ë Œë”ë§ (PHP ì‹¤í–‰, tr(), href() ë“± ì£¼ì…)
4. window.Store.state ì´ˆê¸°í™” (HTML ë§¨ ì•„ë˜)
5. ready() í•¨ìˆ˜ ì‹¤í–‰ (DOM ì¤€ë¹„ ì™„ë£Œ í›„)
```

**ì¤‘ìš”**: `tr()`, `href()`, `t()->í‚¤` ë“± PHP í•¨ìˆ˜ëŠ” ì„œë²„ ì‹¤í–‰ ì‹œì ì— ì²˜ë¦¬ë˜ë¯€ë¡œ ready() ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.

---

## Petite Vue.js - ê²½ëŸ‰ ë°˜ì‘í˜• í”„ë ˆì„ì›Œí¬

### Petite Vue.js ê°œìš”

Petite Vue.jsëŠ” Vue.jsì˜ ê²½ëŸ‰ ë²„ì „ìœ¼ë¡œ, **6KB í¬ê¸°ì˜ í”„ë¡œê·¸ë ˆì‹œë¸Œ í–¥ìƒ(Progressive Enhancement) í”„ë ˆì„ì›Œí¬**ì…ë‹ˆë‹¤. Sonubì—ì„œëŠ” ê°„ë‹¨í•œ ë°˜ì‘í˜• UIë¥¼ êµ¬í˜„í•  ë•Œ Petite Vueë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ğŸ”¥ğŸ”¥ğŸ”¥ ì¤‘ìš”: Petite VueëŠ” layout.phpì—ì„œ ìë™ìœ¼ë¡œ í¬í•¨ë˜ê³  ì´ˆê¸°í™”ë˜ì–´ Sonubì˜ ëª¨ë“  ì˜ì—­ì—ì„œ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ìƒíƒœì…ë‹ˆë‹¤ ğŸ”¥ğŸ”¥ğŸ”¥**

### ìë™ ì´ˆê¸°í™”

Petite VueëŠ” **layout.php**ì—ì„œ ìë™ìœ¼ë¡œ ë¡œë“œë˜ê³  ì´ˆê¸°í™”ë©ë‹ˆë‹¤:

```javascript
// layout.phpì—ì„œ ìë™ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ
<script src="/js/petite-vue.iife.js" defer></script>
<script>
ready(() => {
    // v-scopeê°€ ë¶™ì€ ìš”ì†Œë§Œ ê³¨ë¼ì„œ Petite Vue ì ìš©
    document.querySelectorAll('[v-scope]').forEach(el => {
        // ê° v-scope ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ë§ˆìš´íŠ¸
        PetiteVue.createApp().mount(el)
    })
})
</script>
```

**íŠ¹ì§•:**
- âœ… **ìë™ ì´ˆê¸°í™”**: í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ ëª¨ë“  `v-scope` ìš”ì†Œ ì´ˆê¸°í™”
- âœ… **ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥**: ë³„ë„ì˜ ì´ˆê¸°í™” ì½”ë“œ ì—†ì´ ë°”ë¡œ ì‚¬ìš©
- âœ… **ë…ë¦½ì  ë§ˆìš´íŠ¸**: ê° `v-scope` ìš”ì†ŒëŠ” ë…ë¦½ì ìœ¼ë¡œ ë™ì‘
- âœ… **ì „ì—­ ì‚¬ìš© ê°€ëŠ¥**: Sonubì˜ ëª¨ë“  í˜ì´ì§€ì™€ ìœ„ì ¯ì—ì„œ ì‚¬ìš© ê°€ëŠ¥

### ê¸°ë³¸ ì‚¬ìš©ë²•

**âœ… ê°€ì¥ ê°„ë‹¨í•œ ì˜ˆì œ:**

```html
<!-- ì¹´ìš´í„° ì˜ˆì œ -->
<div v-scope="{ count: 0 }">
    <button @click="count++">í´ë¦­: {{ count }}</button>
</div>

<!-- í† ê¸€ ì˜ˆì œ -->
<div v-scope="{ show: false }">
    <button @click="show = !show">í† ê¸€</button>
    <p v-if="show">ë³´ì´ëŠ” ì½˜í…ì¸ </p>
</div>
```

**âœ… ë³µí•© ì˜ˆì œ (ìš”ì²­ëœ ì˜ˆì œ):**

```html
<div>
    <h1>Petite Vue í…ŒìŠ¤íŠ¸ í˜ì´ì§€</h1>
    <nav v-scope="{count: 0, show: false}">
        count: <button @click="count++">{{ count }}</button>
        show: <button @click="show = !show">{{ show }}</button>
        <hr>
        <div v-if="show">
            <p>ì¹´ìš´íŠ¸ ê°’ì´ {{ count }} ì…ë‹ˆë‹¤.</p>
        </div>
    </nav>
</div>
```

### Vue.jsì™€ì˜ ì°¨ì´ì 

| í•­ëª© | Petite Vue | Vue.js 3.x |
|------|------------|------------|
| **í¬ê¸°** | 6KB | 34KB+ |
| **ì´ˆê¸°í™”** | `v-scope` ì†ì„±ë§Œ ì¶”ê°€ | `Vue.createApp().mount()` í•„ìš” |
| **ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤** | ê°„ë‹¨í•œ ë°˜ì‘í˜• UI | ë³µì¡í•œ SPA ë° ì»´í¬ë„ŒíŠ¸ |
| **ì»´í¬ë„ŒíŠ¸** | âŒ ì§€ì› ì•ˆí•¨ | âœ… ì™„ì „ ì§€ì› |
| **Computed** | âŒ ì§€ì› ì•ˆí•¨ | âœ… ì§€ì› |
| **Watch** | âŒ ì§€ì› ì•ˆí•¨ | âœ… ì§€ì› |
| **Lifecycle** | âŒ ì§€ì› ì•ˆí•¨ | âœ… ì§€ì› |
| **ë””ë ‰í‹°ë¸Œ** | ê¸°ë³¸ ë””ë ‰í‹°ë¸Œë§Œ | ëª¨ë“  ë””ë ‰í‹°ë¸Œ |

**Petite Vue ì§€ì› ë””ë ‰í‹°ë¸Œ:**
- âœ… `v-if`, `v-else`, `v-else-if` - ì¡°ê±´ë¶€ ë Œë”ë§
- âœ… `v-for` - ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
- âœ… `v-show` - í‘œì‹œ/ìˆ¨ê¹€
- âœ… `v-model` - ì–‘ë°©í–¥ ë°”ì¸ë”©
- âœ… `v-text`, `v-html` - í…ìŠ¤íŠ¸/HTML ë°”ì¸ë”©
- âœ… `@click`, `@input` ë“± - ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
- âœ… `:class`, `:style` ë“± - ì†ì„± ë°”ì¸ë”©

### Petite Vue ì‹¤ì œ ì˜ˆì œ

#### ì˜ˆì œ 1: í•  ì¼ ëª©ë¡ (Todo List)

```html
<!-- page/test/petite-vue-todo.php -->
<div class="container py-4">
    <h2>í•  ì¼ ëª©ë¡ (Petite Vue)</h2>

    <div v-scope="{
        todos: [],
        newTodo: '',
        addTodo() {
            if (this.newTodo.trim()) {
                this.todos.push({
                    id: Date.now(),
                    text: this.newTodo,
                    done: false
                });
                this.newTodo = '';
            }
        },
        removeTodo(id) {
            this.todos = this.todos.filter(t => t.id !== id);
        }
    }">
        <!-- ì…ë ¥ í¼ -->
        <div class="input-group mb-3">
            <input type="text"
                   v-model="newTodo"
                   @keyup.enter="addTodo"
                   class="form-control"
                   placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”">
            <button @click="addTodo" class="btn btn-primary">ì¶”ê°€</button>
        </div>

        <!-- í•  ì¼ ëª©ë¡ -->
        <ul class="list-group">
            <li v-for="todo in todos"
                :key="todo.id"
                class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <input type="checkbox" v-model="todo.done" class="form-check-input me-2">
                    <span :class="{ 'text-decoration-line-through': todo.done }">
                        {{ todo.text }}
                    </span>
                </div>
                <button @click="removeTodo(todo.id)" class="btn btn-sm btn-danger">
                    <i class="bi bi-trash"></i>
                </button>
            </li>
        </ul>

        <!-- ë¹ˆ ìƒíƒœ -->
        <p v-if="todos.length === 0" class="text-muted text-center mt-3">
            í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤.
        </p>
    </div>
</div>
```

#### ì˜ˆì œ 2: íƒ­ ë„¤ë¹„ê²Œì´ì…˜

```html
<!-- widgets/tab-navigation.php -->
<div v-scope="{ activeTab: 'tab1' }" class="tab-widget">
    <!-- íƒ­ í—¤ë” -->
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <button @click="activeTab = 'tab1'"
                    :class="['nav-link', activeTab === 'tab1' ? 'active' : '']">
                íƒ­ 1
            </button>
        </li>
        <li class="nav-item">
            <button @click="activeTab = 'tab2'"
                    :class="['nav-link', activeTab === 'tab2' ? 'active' : '']">
                íƒ­ 2
            </button>
        </li>
        <li class="nav-item">
            <button @click="activeTab = 'tab3'"
                    :class="['nav-link', activeTab === 'tab3' ? 'active' : '']">
                íƒ­ 3
            </button>
        </li>
    </ul>

    <!-- íƒ­ ì½˜í…ì¸  -->
    <div class="tab-content p-3 border border-top-0">
        <div v-show="activeTab === 'tab1'">
            <h4>íƒ­ 1 ì½˜í…ì¸ </h4>
            <p>ì²« ë²ˆì§¸ íƒ­ì˜ ë‚´ìš©ì…ë‹ˆë‹¤.</p>
        </div>
        <div v-show="activeTab === 'tab2'">
            <h4>íƒ­ 2 ì½˜í…ì¸ </h4>
            <p>ë‘ ë²ˆì§¸ íƒ­ì˜ ë‚´ìš©ì…ë‹ˆë‹¤.</p>
        </div>
        <div v-show="activeTab === 'tab3'">
            <h4>íƒ­ 3 ì½˜í…ì¸ </h4>
            <p>ì„¸ ë²ˆì§¸ íƒ­ì˜ ë‚´ìš©ì…ë‹ˆë‹¤.</p>
        </div>
    </div>
</div>
```

#### ì˜ˆì œ 3: ì‹¤ì‹œê°„ ê²€ìƒ‰ í•„í„°

```html
<!-- widgets/user-filter.php -->
<div v-scope="{
    searchQuery: '',
    users: [
        { id: 1, name: 'í™ê¸¸ë™', email: 'hong@example.com' },
        { id: 2, name: 'ê¹€ì² ìˆ˜', email: 'kim@example.com' },
        { id: 3, name: 'ì´ì˜í¬', email: 'lee@example.com' },
        { id: 4, name: 'ë°•ë¯¼ìˆ˜', email: 'park@example.com' }
    ],
    get filteredUsers() {
        const query = this.searchQuery.toLowerCase();
        return this.users.filter(user =>
            user.name.toLowerCase().includes(query) ||
            user.email.toLowerCase().includes(query)
        );
    }
}">
    <!-- ê²€ìƒ‰ ì…ë ¥ -->
    <div class="mb-3">
        <input type="text"
               v-model="searchQuery"
               class="form-control"
               placeholder="ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼ë¡œ ê²€ìƒ‰...">
    </div>

    <!-- ì‚¬ìš©ì ëª©ë¡ -->
    <div class="row g-2">
        <div v-for="user in filteredUsers"
             :key="user.id"
             class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-title">{{ user.name }}</h6>
                    <p class="card-text text-muted">{{ user.email }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ -->
    <p v-if="filteredUsers.length === 0" class="text-center text-muted">
        ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
    </p>
</div>
```

### Petite Vue ì£¼ì˜ì‚¬í•­

**âœ… ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ê²½ìš°:**
- ê°„ë‹¨í•œ í† ê¸€, ì¹´ìš´í„°, íƒ­ ì „í™˜
- í¼ ìœ íš¨ì„± ê²€ì‚¬ ë° ë™ì  í¼
- ë¦¬ìŠ¤íŠ¸ í•„í„°ë§ ë° ì •ë ¬
- ê°„ë‹¨í•œ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•œ ìœ„ì ¯

**âŒ ì‚¬ìš©í•˜ì§€ ë§ì•„ì•¼ í•  ê²½ìš°:**
- ë³µì¡í•œ ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡°
- Computed, Watch, Lifecycleì´ í•„ìš”í•œ ê²½ìš°
- ëŒ€ê·œëª¨ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•œ ê²½ìš°
- API í˜¸ì¶œ ë° ë¹„ë™ê¸° ì‘ì—…ì´ ë§ì€ ê²½ìš°

**ğŸ”¥ ì¤‘ìš” ì œí•œì‚¬í•­:**
1. **Computed ë¯¸ì§€ì›**: getter í•¨ìˆ˜ë¡œ ëŒ€ì²´ ê°€ëŠ¥í•˜ì§€ë§Œ ìºì‹± ì—†ìŒ
2. **Watch ë¯¸ì§€ì›**: ìƒíƒœ ë³€ê²½ ê°ì§€ ë¶ˆê°€
3. **ì»´í¬ë„ŒíŠ¸ ë¯¸ì§€ì›**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ìƒì„± ë¶ˆê°€
4. **Lifecycle ë¯¸ì§€ì›**: mounted, created ë“± í›… ì‚¬ìš© ë¶ˆê°€
5. **ë©”ì„œë“œ ì •ì˜**: v-scope ë‚´ì—ì„œ ì§ì ‘ ì •ì˜í•´ì•¼ í•¨

**Vue.js vs Petite Vue ì„ íƒ ê°€ì´ë“œ:**
```javascript
// âœ… Petite Vue ì‚¬ìš© - ê°„ë‹¨í•œ UI
<div v-scope="{ show: false }">
    <button @click="show = !show">í† ê¸€</button>
    <p v-if="show">ê°„ë‹¨í•œ í† ê¸€ UI</p>
</div>

// âœ… Vue.js ì‚¬ìš© - ë³µì¡í•œ ë¡œì§
ready(() => {
    Vue.createApp({
        data() {
            return { users: [] };
        },
        async mounted() {
            // API í˜¸ì¶œ, ë³µì¡í•œ ì´ˆê¸°í™”
            this.users = await func('list_users', {});
        },
        computed: {
            activeUsers() {
                return this.users.filter(u => u.active);
            }
        }
    }).mount('#app');
});
```

**ìš”ì•½:**
- Petite VueëŠ” **layout.phpì—ì„œ ìë™ ì´ˆê¸°í™”**ë˜ì–´ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥
- `v-scope` ì†ì„±ë§Œ ì¶”ê°€í•˜ë©´ ìë™ìœ¼ë¡œ ë°˜ì‘í˜• UI ìƒì„±
- ê°„ë‹¨í•œ UIì—ëŠ” Petite Vue, ë³µì¡í•œ ì•±ì—ëŠ” Vue.js 3.x ì‚¬ìš©
- ë‘ í”„ë ˆì„ì›Œí¬ëŠ” ê°™ì€ í˜ì´ì§€ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ê³µì¡´ ê°€ëŠ¥
