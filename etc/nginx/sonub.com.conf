server {
    listen 80;
    server_name sonub.com www.sonub.com;
    root /var/www/app/public; # index.php가 있는 디렉터리
    index index.php;

    # 1) 정적 파일은 그대로 서빙, 나머지는 index.php로
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    # 2) PHP 실행
    location ~ \.php$ {
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info; # (옵션) 라우팅에 필요하면 사용
        fastcgi_pass unix:/run/php/php8.2-fpm.sock; # 또는 127.0.0.1:9000
        fastcgi_read_timeout 120s;
    }

    # 3) 보안: 숨김/원본 파일 차단 (선택)
    location ~ /\.(?!well-known) {
        deny all;
    }
}