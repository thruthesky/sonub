{
  "indexes": [
    // ==================== Users Collection ====================

    /**
     * 사용자 검색 및 정렬을 위한 복합 인덱스
     */
    {
      "collectionGroup": "users",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "gender",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "sort_recentWithPhoto",
          "order": "DESCENDING"
        }
      ]
    },
    {
      "collectionGroup": "users",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "gender",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "createdAt",
          "order": "DESCENDING"
        }
      ]
    },
    {
      "collectionGroup": "users",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "displayNameLowerCase",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "createdAt",
          "order": "DESCENDING"
        }
      ]
    },

    // ==================== Chats Collection ====================

    /**
     * 채팅방 목록 조회를 위한 복합 인덱스
     */
    {
      "collectionGroup": "chats",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "type",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "createdAt",
          "order": "DESCENDING"
        }
      ]
    },
    {
      "collectionGroup": "chats",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "type",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "memberCount",
          "order": "DESCENDING"
        }
      ]
    },
    {
      "collectionGroup": "chats",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "type",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "lastMessageAt",
          "order": "DESCENDING"
        }
      ]
    },

    // ==================== Messages Subcollection ====================

    /**
     * 채팅 메시지 정렬 (서브컬렉션)
     *
     * 단일 필드 인덱스는 Firestore가 자동 생성하므로 복합 인덱스만 정의
     * 현재는 createdAt만 사용하므로 자동 인덱스로 충분
     */

    // ==================== Chat-Joins Subcollection ====================

    /**
     * 채팅 참여 목록 정렬 (서브컬렉션)
     *
     * 사용자별 채팅방 목록을 다양한 조건으로 정렬
     */
    {
      "collectionGroup": "chat-joins",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        {
          "fieldPath": "roomType",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "lastMessageAt",
          "order": "DESCENDING"
        }
      ]
    },
    {
      "collectionGroup": "chat-joins",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        {
          "fieldPath": "roomType",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "pin",
          "order": "DESCENDING"
        },
        {
          "fieldPath": "lastMessageAt",
          "order": "DESCENDING"
        }
      ]
    },
    {
      "collectionGroup": "chat-joins",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        {
          "fieldPath": "roomType",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "newMessageCount",
          "order": "DESCENDING"
        },
        {
          "fieldPath": "lastMessageAt",
          "order": "DESCENDING"
        }
      ]
    },
    {
      "collectionGroup": "chat-joins",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        {
          "fieldPath": "pin",
          "order": "DESCENDING"
        },
        {
          "fieldPath": "lastMessageAt",
          "order": "DESCENDING"
        }
      ]
    },

    // ==================== Chat-Invitations Subcollection ====================

    /**
     * 채팅 초대장 정렬 (서브컬렉션)
     */
    {
      "collectionGroup": "chat-invitations",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        {
          "fieldPath": "status",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "createdAt",
          "order": "DESCENDING"
        }
      ]
    },

    // ==================== Chat-Favorites Subcollection ====================

    /**
     * 채팅 즐겨찾기 정렬 (서브컬렉션)
     *
     * folderOrder는 단일 필드 인덱스이므로 자동 생성됨
     */

    // ==================== Stats Collection ====================

    /**
     * 통계 데이터 조회
     *
     * 통계 데이터는 주로 단일 문서 읽기이므로 특별한 인덱스 불필요
     */
  ],
  "fieldOverrides": [
    /**
     * TTL (Time-To-Live) 필드 설정
     *
     * expiresAt 필드를 가진 문서는 자동으로 삭제됩니다.
     * (Firestore에서 지원하는 기능이지만, 현재는 사용하지 않음)
     */
  ]
}
